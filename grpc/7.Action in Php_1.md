
接下来，我准备尝自己写一个简单的RPC应用。  
首先，我仍然写一个Go的服务端。  

不过这次的环境和之前有所不同，这次我放在Linux服务器下面。并且这次实战的主要诉求是以Php做为客户端与Go服务端的交互：  

安装Go环境：  
```
yum install go
```

```
[root@6c6aa7fb57ef /]# go version
go version go1.8.3 linux/amd64
```

安装Php版本的protobuf  
`wget https://github.com/google/protobuf/releases/download/v3.4.1/protobuf-php-3.4.1.tar.gz`
下载，解压，安装
```
./configure
make && make install
```

完成  
```
[root@6c6aa7fb57ef protobuf-3.4.1]# protoc --version
libprotoc 3.4.0
```

写一个proto文件：  
```go
//redis.proto
syntax = "proto3";

package redis;

service Redis {
  rpc Command (RedisRequest) returns (RedisReply) {}
}

message RedisRequest {
  string action = 1;
  string param = 2;
}

// The response message containing the greetings
message RedisReply {
  string result = 1;
}

```
这个项目会有redis有关系，所以我起名叫redis。在proto里面，我主要实现一个叫Command的方法，这个方法需要输入两个参数：action（字符）和param（字符）  
返回一个参数：result（字符） 
`很简单`

写好之后，编译`选用的是php插件`：`protoc redis.proto --php_out=plugins=grpc:.`  
完成后得到两个Php文件：  
```
[root@6c6aa7fb57ef grpc]# ls
GPBMetadata  Redis  redis.proto
[root@6c6aa7fb57ef grpc]# cd Redis/
[root@6c6aa7fb57ef Redis]# ls
RedisReply.php  RedisRequest.php
```

先不管它们，因为我是要用Go作为服务器，所以还要进行Go的设置。  
`go get -u github.com/golang/protobuf/protoc-gen-go`  
安装好后，我在我的`/root/go/bin/protoc-gen-go`得到了这个库。  

接着，用这个Go的proto插件同样基于redis.proto文件生成一套标准代码。  
`protoc redis.proto --go_out=plugins=grpc:.`  
产生的`redis.pb.go`  

我把这个go文件复制到我的项目中去。  

在复制前，我还需要进行Go的Grpc库的安装，和windows环境不同的是，因为墙的关系，我是手动安装的  

先用go env查看一下你的GOPATH的目录：  

再去相应的目录建立你的库目录：  

```go
$mkdir -p $GOPATH/src/golang.org/x/
$cd $GOPATH/src/golang.org/x/
$git clone https://github.com/golang/net.git net 
$go install net
```
按这个方法，一共要装四个库：  
```
git clone https://github.com/golang/net.git net
go install net
https://github.com/golang/text.git net
https://github.com/grpc/grpc-go.git grpc
https://github.com/google/go-genproto.git genproto
```

接着，就可以写代码了，具体的代码在这里就不贴出来了，可以参考下面的地址的源文件：  
<a href="">服务端的实现</a>
<a href="">客户端的实现</a>
